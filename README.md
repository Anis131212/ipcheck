# ğŸŒ IP è´¨é‡æ£€æµ‹ç³»ç»Ÿ

> å…¨æ ˆ IP è´¨é‡æ£€æµ‹ä¸é£é™©åˆ†æå¹³å° | æ”¯æŒå¤šæ•°æ®æºèšåˆã€AI æ™ºèƒ½åˆ†æã€æµè§ˆå™¨æŒ‡çº¹æ£€æµ‹

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Docker](https://img.shields.io/badge/docker-ready-brightgreen.svg)](https://www.docker.com/)
[![Node.js](https://img.shields.io/badge/node-%3E%3D20-green.svg)](https://nodejs.org/)
[![React](https://img.shields.io/badge/react-18-blue.svg)](https://reactjs.org/)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¯ å¤šç»´åº¦ IP æ£€æµ‹

- **6 å¤§æ•°æ®æºèšåˆ**
  - âœ… **IPQualityScore** - æ¬ºè¯ˆè¯„åˆ†ã€VPN/ä»£ç†æ£€æµ‹
  - âœ… **AbuseIPDB** - IP æ»¥ç”¨å†å²ã€ä¸¾æŠ¥è®°å½•
  - âœ… **ip-api.com** - åœ°ç†ä½ç½®ã€ISPã€ASN ä¿¡æ¯
  - âœ… **IP2Location** - ä»£ç†æ£€æµ‹ã€ä½¿ç”¨ç±»å‹
  - âœ… **IPData** - å¨èƒæƒ…æŠ¥ (Tor/Proxy/Abuse)
  - âœ… **Cloudflare Radar** - ASN çº§åˆ« Bot æµé‡ç»Ÿè®¡ ğŸ†•

- **æ™ºèƒ½ IP åˆ†ç±»**
  - ğŸ  ä½å®… IP (Residential) - æœ€ä¼˜è´¨é‡
  - ğŸ“± ç§»åŠ¨ IP (Mobile) - ä¼˜ç§€è´¨é‡
  - ğŸ¢ å•†ä¸š IP (Commercial) - è‰¯å¥½è´¨é‡
  - ğŸ–¥ï¸ æ•°æ®ä¸­å¿ƒ IP (Data Center) - ä¸€èˆ¬è´¨é‡
  - ğŸ“ æ•™è‚² IP (Education) - ç‰¹æ®Šç±»å‹

- **é«˜çº§æ£€æµ‹èƒ½åŠ›**
  - ğŸŒ **åŸç”Ÿ/å¹¿æ’­ IP æ£€æµ‹** - å¯¹æ¯”å¤šæºå›½å®¶ç åˆ¤æ–­ IP çœŸå®æ€§
  - ğŸ”„ **åŒ ISP æ£€æµ‹** - åˆ†æ ISP ä¸ç»„ç»‡ä¸ä¸€è‡´æ€§
  - ğŸ¤– **Bot æµé‡åˆ†æ** - åŸºäº ASN çš„ Bot é£é™©è¯„ä¼°
  - ğŸš¨ **å¨èƒæƒ…æŠ¥æ£€æµ‹** - Tor/VPN/Proxy/æ»¥ç”¨æ ‡è®°

### ğŸ–¥ï¸ æµè§ˆå™¨æŒ‡çº¹ä¸ç¯å¢ƒæ£€æµ‹

- **WebRTC IP æ³„éœ²æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹çœŸå® IP ä¸è¿æ¥ IP ä¸ä¸€è‡´
- **Canvas æŒ‡çº¹** - ç”Ÿæˆå”¯ä¸€è®¾å¤‡æŒ‡çº¹
- **ç¯å¢ƒä¿¡æ¯é‡‡é›†** - OSã€æµè§ˆå™¨ã€æ—¶åŒºã€è¯­è¨€ã€ç¡¬ä»¶ä¿¡æ¯
- **è¿é€šæ€§æµ‹è¯•** - Googleã€YouTubeã€GitHub å¯è¾¾æ€§æ£€æµ‹

### ğŸ¤– AI æ™ºèƒ½åˆ†æ (å¯é€‰)

- æ”¯æŒä»»ä½•å…¼å®¹ OpenAI API çš„å¤§æ¨¡å‹
- ç»¼åˆå¤šæºæ•°æ®ç”Ÿæˆä¸“ä¸šåˆ†ææŠ¥å‘Š
- æä¾›ä½¿ç”¨åœºæ™¯å»ºè®®å’Œé£é™©æç¤º
- Markdown æ ¼å¼åŒ–è¾“å‡º,æ˜“äºé˜…è¯»

### âš¡ é«˜æ€§èƒ½æ¶æ„

- **åç«¯**: Fastify (æé€Ÿ Node.js æ¡†æ¶)
- **å‰ç«¯**: React 18 + Vite + TailwindCSS
- **ç¼“å­˜**: Redis (å‡å°‘ API è°ƒç”¨,é™ä½æˆæœ¬)
- **åå‘ä»£ç†**: Nginx (è´Ÿè½½å‡è¡¡ã€SSL ç»ˆæ­¢)
- **å®¹å™¨åŒ–**: Docker + Docker Compose (ä¸€é”®éƒ¨ç½²)

## ğŸ“¸ ç³»ç»Ÿæˆªå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IP è´¨é‡æ£€æµ‹ç³»ç»Ÿ                                          â”‚
â”‚  å®æ—¶é£é™©åˆ†æä¸æµè§ˆå™¨æŒ‡çº¹æ£€æµ‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ é£é™©è¯„åˆ†  â”‚  â”‚ ç½‘ç»œä¿¡æ¯ä¸è´¨é‡åˆ†æ                   â”‚ â”‚
â”‚  â”‚   75    â”‚  â”‚ IP: 8.8.8.8                        â”‚ â”‚
â”‚  â”‚         â”‚  â”‚ ç±»å‹: æ•°æ®ä¸­å¿ƒ IP                    â”‚ â”‚
â”‚  â”‚ VPN: å¦  â”‚  â”‚ ISP: Google LLC                    â”‚ â”‚
â”‚  â”‚ ä»£ç†: å¦ â”‚  â”‚ ASN: AS15169                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ ä½ç½®: ç¾å›½, å¼—å‰å°¼äºšå·               â”‚ â”‚
â”‚                â”‚ åŸç”ŸIP: æ˜¯                          â”‚ â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¤– AI æ™ºèƒ½åˆ†ææŠ¥å‘Š                                â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚ ## IPè´¨é‡åˆ†ææŠ¥å‘Š                                 â”‚   â”‚
â”‚  â”‚ ### åŸºç¡€ä¿¡æ¯                                      â”‚   â”‚
â”‚  â”‚ - Cloudflare ASN Botæµé‡: 97.3%                  â”‚   â”‚
â”‚  â”‚ - æ»¥ç”¨è¯„åˆ†: 0/100                                â”‚   â”‚
â”‚  â”‚ ### è´¨é‡è¯„åˆ†: 85/100                             â”‚   â”‚
â”‚  â”‚ ### é€‚ç”¨åœºæ™¯å»ºè®®                                  â”‚   â”‚
â”‚  â”‚ - âœ… æ¨è: ç½‘é¡µæµè§ˆã€APIè°ƒç”¨                      â”‚   â”‚
â”‚  â”‚ - âš ï¸ è°¨æ…: è´¦å·æ³¨å†Œã€æ”¯ä»˜æ“ä½œ                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker 20.10+
- Docker Compose 2.0+
- (å¯é€‰) å„ API æœåŠ¡å•†çš„å¯†é’¥

### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/ipcheck.git
cd ipcheck
```

### 2ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env
```

**æœ€å°é…ç½®** (å…è´¹):
```env
# åªéœ€è¦è¿™ä¸€ä¸ªå°±èƒ½è¿è¡ŒåŸºç¡€åŠŸèƒ½
REDIS_HOST=redis
```

**æ¨èé…ç½®** (è·å–å®Œæ•´åŠŸèƒ½):
```env
# IPQualityScore (å…è´¹ç‰ˆ: 5000æ¬¡/æœˆ)
# è·å–: https://www.ipqualityscore.com/create-account
IPQS_KEY=your_ipqs_key_here

# AbuseIPDB (å…è´¹ç‰ˆ: 1000æ¬¡/å¤©)
# è·å–: https://www.abuseipdb.com/account/api
ABUSEIPDB_KEY=your_abuseipdb_key_here

# IP2Location (å…è´¹ç‰ˆ: 500æ¬¡/å¤©)
# è·å–: https://www.ip2location.io/
IP2LOCATION_KEY=your_ip2location_key_here

# IPData (å…è´¹ç‰ˆ: 1500æ¬¡/å¤©)
# è·å–: https://ipdata.co/
IPDATA_KEY=your_ipdata_key_here

# Cloudflare Radar API (å…è´¹)
# è·å–: https://dash.cloudflare.com/profile/api-tokens
CLOUDFLARE_API_TOKEN=your_cloudflare_token_here

# AI åˆ†æ (å¯é€‰ - æ”¯æŒ OpenAI/DeepSeek/SiliconFlow ç­‰)
LLM_BASE_URL=https://api.openai.com/v1
LLM_API_KEY=your_llm_api_key
LLM_MODEL=gpt-3.5-turbo

# Redis
REDIS_HOST=redis
```

### 3ï¸âƒ£ å¯åŠ¨æœåŠ¡

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰å®¹å™¨
docker-compose up -d --build

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f api
```

### 4ï¸âƒ£ è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®:
- **ä¸»åº”ç”¨**: http://localhost:8080
- **API æ–‡æ¡£**: http://localhost:8080/api/debug/config

## ğŸ“¦ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### å¿«é€Ÿéƒ¨ç½² (æ¨è)

ä½¿ç”¨æä¾›çš„éƒ¨ç½²è„šæœ¬:

```bash
# åœ¨æœåŠ¡å™¨ä¸Š
chmod +x deploy-to-server.sh
./deploy-to-server.sh
```

### æ‰‹åŠ¨éƒ¨ç½²

è¯¦ç»†çš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—è¯·æŸ¥çœ‹ [PRODUCTION-DEPLOYMENT.md](PRODUCTION-DEPLOYMENT.md),åŒ…æ‹¬:

- âœ… å®‰å…¨é…ç½®æœ€ä½³å®è·µ
- âœ… Nginx/Caddy åå‘ä»£ç†é…ç½®
- âœ… SSL è¯ä¹¦è‡ªåŠ¨è·å–
- âœ… ç›‘æ§å’Œæ—¥å¿—é…ç½®
- âœ… å¤‡ä»½å’Œæ¢å¤ç­–ç•¥
- âœ… æ•…éšœæ’æŸ¥æŒ‡å—

### ä½¿ç”¨ Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name ipcheck.yourdomain.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name ipcheck.yourdomain.com;

    ssl_certificate /etc/letsencrypt/live/ipcheck.yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/ipcheck.yourdomain.com/privkey.pem;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚
â”‚  (React)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Nginx    â”‚ â”€â”€â”€ SSL ç»ˆæ­¢
â”‚  (Reverse   â”‚ â”€â”€â”€ è´Ÿè½½å‡è¡¡
â”‚   Proxy)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Fastify   â”‚â—„â”€â”€â”€â”€â–ºâ”‚    Redis    â”‚
â”‚  (Node.js)  â”‚      â”‚   (Cache)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â–º IPQualityScore API
       â”œâ”€â”€â–º AbuseIPDB API
       â”œâ”€â”€â–º ip-api.com
       â”œâ”€â”€â–º IP2Location API
       â”œâ”€â”€â–º IPData API
       â”œâ”€â”€â–º Cloudflare Radar API
       â””â”€â”€â–º LLM API (å¯é€‰)
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

**å‰ç«¯**:
- React 18.3
- Vite 7.2
- TailwindCSS 3.4
- Chart.js (é£é™©è¯„åˆ†å¯è§†åŒ–)
- Axios (HTTP å®¢æˆ·ç«¯)

**åç«¯**:
- Node.js 20 (Alpine)
- Fastify 5.2 (é«˜æ€§èƒ½ Web æ¡†æ¶)
- Redis 7 (ç¼“å­˜å±‚)
- Axios (API èšåˆ)

**åŸºç¡€è®¾æ–½**:
- Docker & Docker Compose
- Nginx (åå‘ä»£ç†)
- Let's Encrypt (SSL è¯ä¹¦)

## ğŸ”§ API ç«¯ç‚¹

### å¥åº·æ£€æŸ¥

```bash
GET /health
```

### IP æ£€æµ‹

```bash
# è‡ªåŠ¨æ£€æµ‹å½“å‰ IP
GET /api/check

# æ£€æµ‹æŒ‡å®š IP
GET /api/check?ip=8.8.8.8
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "ip": "8.8.8.8",
  "ipType": "æ•°æ®ä¸­å¿ƒ IP (Data Center)",
  "fraudScore": 0,
  "abuseScore": 0,
  "isVpn": false,
  "isProxy": false,
  "isTor": false,
  "country": "United States",
  "countryCode": "US",
  "city": "Ashburn",
  "isp": "Google LLC",
  "ASN": "AS15169",
  "isNative": true,
  "nativeReason": "Country codes match (US)",
  "isDualIsp": false,
  "cf_asn_bot_pct": 97.26,
  "cf_asn_human_pct": 2.74,
  "cf_asn_likely_bot": true,
  "aiReasoning": "## IPè´¨é‡åˆ†ææŠ¥å‘Š\n...",
  "sources": ["ipapi", "abuseipdb", "ip2location", "ipdata", "cloudflare_asn"],
  "timestamp": "2025-12-14T00:00:00.000Z"
}
```

### è°ƒè¯•ä¿¡æ¯

```bash
GET /api/debug/config
```

## ğŸ“Š æ•°æ®æºè¯´æ˜

### å…è´¹é…é¢å¯¹æ¯”

| æ•°æ®æº | å…è´¹é¢åº¦ | æ ¸å¿ƒåŠŸèƒ½ | è·å–åœ°å€ |
|--------|---------|---------|---------|
| **ip-api.com** | 45æ¬¡/åˆ†é’Ÿ | åœ°ç†ä½ç½®ã€ISPã€ASN | æ— éœ€æ³¨å†Œ |
| **IPQualityScore** | 5000æ¬¡/æœˆ | æ¬ºè¯ˆè¯„åˆ†ã€VPNæ£€æµ‹ | [æ³¨å†Œ](https://www.ipqualityscore.com/create-account) |
| **AbuseIPDB** | 1000æ¬¡/å¤© | æ»¥ç”¨å†å²ã€ä¸¾æŠ¥è®°å½• | [æ³¨å†Œ](https://www.abuseipdb.com/account/api) |
| **IP2Location** | 500æ¬¡/å¤© | ä»£ç†æ£€æµ‹ã€ä½¿ç”¨ç±»å‹ | [æ³¨å†Œ](https://www.ip2location.io/) |
| **IPData** | 1500æ¬¡/å¤© | å¨èƒæƒ…æŠ¥æ£€æµ‹ | [æ³¨å†Œ](https://ipdata.co/) |
| **Cloudflare Radar** | æ— é™åˆ¶ | ASN Botæµé‡ç»Ÿè®¡ | [è·å–Token](https://dash.cloudflare.com/profile/api-tokens) |

### æ¨èç»„åˆ

**åŸºç¡€ç‰ˆ** (å®Œå…¨å…è´¹):
- ip-api.com (å¿…éœ€)
- Cloudflare Radar (å¯é€‰,å¢å¼ºBotæ£€æµ‹)

**æ ‡å‡†ç‰ˆ** (æ¨è):
- åŸºç¡€ç‰ˆ +
- AbuseIPDB (æ»¥ç”¨æ£€æµ‹)
- IP2Location (ä»£ç†æ£€æµ‹)

**ä¸“ä¸šç‰ˆ** (å®Œæ•´åŠŸèƒ½):
- æ ‡å‡†ç‰ˆ +
- IPQualityScore (æ¬ºè¯ˆè¯„åˆ†)
- IPData (å¨èƒæƒ…æŠ¥)
- AI åˆ†æ (ç»¼åˆæŠ¥å‘Š)

## ğŸ” æ ¸å¿ƒæ£€æµ‹é€»è¾‘

### 1. åŸç”Ÿ/å¹¿æ’­ IP æ£€æµ‹

**åŸç†**: å¯¹æ¯”å¤šä¸ªæ•°æ®æºçš„å›½å®¶ç ,åˆ¤æ–­ IP çš„æ³¨å†Œå›½å®¶ä¸å®é™…ä½¿ç”¨åœ°æ˜¯å¦ä¸€è‡´ã€‚

```javascript
// backend/src/services/ipCheck.js
const geoCountry = merged.countryCode;        // ip-api æä¾›
const ip2locCountry = merged.ip2location_country_code;  // IP2Location æä¾›

if (geoCountry === ip2locCountry) {
    isNative = true;  // åŸç”Ÿ IP
    nativeReason = `Country codes match (${geoCountry})`;
} else {
    isNative = false;  // å¹¿æ’­ IP (å¯èƒ½ä¸ºä»£ç†æˆ–VPN)
    nativeReason = `Country mismatch: Geo=${geoCountry}, IP2Loc=${ip2locCountry}`;
}
```

**åº”ç”¨åœºæ™¯**:
- ğŸŸ¢ åŸç”Ÿ IP: å¯ä¿¡åº¦é«˜,é€‚åˆæ³¨å†Œã€æ”¯ä»˜ç­‰æ•æ„Ÿæ“ä½œ
- ğŸ”´ å¹¿æ’­ IP: å¯èƒ½ä¸ºä»£ç†/VPN,éœ€è¦é¢å¤–éªŒè¯

### 2. Cloudflare ASN Bot æ£€æµ‹

**åŸç†**: åŸºäº Cloudflare Radar è¿‡å» 7 å¤©çš„ ASN æµé‡ç»Ÿè®¡,è¯„ä¼°è¯¥ IP æ‰€å±ç½‘ç»œçš„ Bot æµé‡æ¯”ä¾‹ã€‚

```javascript
// è‡ªåŠ¨æå– ASN å¹¶æŸ¥è¯¢
const asn = extractASN(ipData.as);  // ä¾‹å¦‚: AS15169
const cfData = await cloudflare.get(`/radar/http/summary/bot_class?asn=${asn}`);

// è¿”å›ç»“æœ
{
  cf_asn_bot_pct: 97.26,      // Bot æµé‡å æ¯”
  cf_asn_human_pct: 2.74,     // äººç±»æµé‡å æ¯”
  cf_asn_likely_bot: true     // æ˜¯å¦ä¸ºé«˜é£é™© ASN (>50%)
}
```

**å…¸å‹æ¡ˆä¾‹**:
- Google (AS15169): 97% Bot æµé‡ â† æ­£å¸¸ (çˆ¬è™«ã€API)
- ä½å®…å®½å¸¦ ISP: 5-20% Bot æµé‡ â† æ­£å¸¸
- æœªçŸ¥ IDC: 80%+ Bot æµé‡ â† é«˜é£é™©

### 3. WebRTC IP æ³„éœ²æ£€æµ‹

**å‰ç«¯å®ç°** (`frontend/src/utils/fingerprint.js`):

```javascript
export async function detectWebRTCLeak() {
    const pc = new RTCPeerConnection({
        iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
    });

    pc.createDataChannel('');

    pc.onicecandidate = (event) => {
        const ipRegex = /([0-9]{1,3}\.){3}[0-9]{1,3}/g;
        const matches = event.candidate?.candidate.match(ipRegex);

        matches?.forEach(ip => {
            if (isPrivateIP(ip)) {
                ips.local.push(ip);   // å†…ç½‘ IP
            } else {
                ips.public.push(ip);  // å…¬ç½‘ IP (å¯èƒ½æ³„éœ²)
            }
        });
    };

    await pc.createOffer();
    return ips;
}
```

**æ£€æµ‹é€»è¾‘**:
```javascript
// frontend/src/components/Dashboard.jsx
if (webrtcIP !== httpConnectionIP) {
    // âš ï¸ æ£€æµ‹åˆ° IP ä¸ä¸€è‡´ - å¯èƒ½ä½¿ç”¨ VPN/ä»£ç†
    showWarning('WebRTC æ³„éœ²çœŸå® IP');
}
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# åç«¯å¼€å‘
cd backend
npm install
npm run dev

# å‰ç«¯å¼€å‘
cd frontend
npm install
npm run dev
```

### ç›®å½•ç»“æ„

```
ipcheck/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.js           # Fastify æœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ ipCheck.js      # IP æ£€æµ‹æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ redis.js        # Redis ç¼“å­˜å·¥å…·
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ Dashboard.jsx   # ä¸»ç•Œé¢
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ fingerprint.js  # æµè§ˆå™¨æŒ‡çº¹
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ nginx.conf              # åå‘ä»£ç†é…ç½®
â”œâ”€â”€ docker-compose.yml          # å®¹å™¨ç¼–æ’
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ deploy-to-server.sh         # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ PRODUCTION-DEPLOYMENT.md    # ç”Ÿäº§éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ TROUBLESHOOTING.md          # æ•…éšœæ’æŸ¥æŒ‡å—
â””â”€â”€ README.md                   # æœ¬æ–‡ä»¶
```

### æ·»åŠ æ–°çš„æ•°æ®æº

1. åœ¨ `backend/src/services/ipCheck.js` çš„ `apis` æ•°ç»„ä¸­æ·»åŠ :

```javascript
{
    name: 'your_api',
    url: 'https://api.example.com/ip/${ip}',
    enabled: !!process.env.YOUR_API_KEY,
    headers: { 'Authorization': `Bearer ${process.env.YOUR_API_KEY}` },
    transform: (data) => ({
        // è½¬æ¢ API å“åº”ä¸ºç»Ÿä¸€æ ¼å¼
        customField: data.field_name
    })
}
```

2. åœ¨ `.env` ä¸­æ·»åŠ  API å¯†é’¥
3. åœ¨ `docker-compose.yml` ä¸­æ˜ å°„ç¯å¢ƒå˜é‡

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: IP æ˜¾ç¤ºä¸º 127.0.0.1 æˆ–å†…ç½‘ IP?**

A: ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹çœŸå®å…¬ç½‘ IPã€‚å¦‚æœä»æ˜¾ç¤ºå†…ç½‘ IP:
1. æ£€æŸ¥ Nginx é…ç½®æ˜¯å¦è®¾ç½®äº† `X-Forwarded-For` å¤´
2. ç¡®è®¤åç«¯ `trustProxy: true` å·²å¯ç”¨
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

**Q: IPQS/AbuseIPDB è¿”å›é…é¢é”™è¯¯?**

A:
- IPQS å…è´¹ç‰ˆ: 20æ¬¡/å¤© â†’ ç­‰å¾…é‡ç½®æˆ–å‡çº§
- AbuseIPDB å…è´¹ç‰ˆ: 1000æ¬¡/å¤© â†’ æ£€æŸ¥æ˜¯å¦è¶…é™
- å¯ç”¨ Redis ç¼“å­˜é¿å…é‡å¤æŸ¥è¯¢

**Q: Cloudflare Radar API è®¤è¯å¤±è´¥?**

A:
1. ç¡®è®¤ Token æœ‰æ•ˆ: `curl "https://api.cloudflare.com/client/v4/user/tokens/verify" -H "Authorization: Bearer YOUR_TOKEN"`
2. æ£€æŸ¥ Token æƒé™æ˜¯å¦åŒ…å« Radar API
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯: `docker-compose logs api | grep cloudflare`

**Q: AI åˆ†ææŠ¥å‘Šä¸æ˜¾ç¤º?**

A: æ£€æŸ¥ LLM é…ç½®:
```bash
docker-compose exec api env | grep LLM
```

è¯¦ç»†æ•…éšœæ’æŸ¥è¯·æŸ¥çœ‹ [TROUBLESHOOTING.md](TROUBLESHOOTING.md)

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### Redis ç¼“å­˜ç­–ç•¥

- **é»˜è®¤ç¼“å­˜æ—¶é—´**: 15 åˆ†é’Ÿ
- **ç¼“å­˜é”®æ ¼å¼**: `ip:check:{ip_address}`
- **ç¼“å­˜æ¸…é™¤**: `docker-compose exec redis redis-cli FLUSHALL`

### API è°ƒç”¨ä¼˜åŒ–

1. **å¹¶å‘è¯·æ±‚**: æ‰€æœ‰ API å¹¶å‘è°ƒç”¨,å‡å°‘æ€»å»¶è¿Ÿ
2. **è¶…æ—¶æ§åˆ¶**: 5 ç§’è¶…æ—¶,é¿å…é˜»å¡
3. **é”™è¯¯éš”ç¦»**: å•ä¸ª API å¤±è´¥ä¸å½±å“å…¶ä»–æ•°æ®æº
4. **ä¸¤é˜¶æ®µæŸ¥è¯¢**: å…ˆè·å–åŸºç¡€ä¿¡æ¯,å†è°ƒç”¨ ASN ä¾èµ–çš„ API

## ğŸ” å®‰å…¨å»ºè®®

### ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•

- [ ] .env æ–‡ä»¶æƒé™è®¾ç½®ä¸º `600`
- [ ] .env å·²åŠ å…¥ .gitignore
- [ ] é…ç½® HTTPS (Let's Encrypt)
- [ ] è®¾ç½® API é€Ÿç‡é™åˆ¶
- [ ] å¯ç”¨ Docker å®¹å™¨èµ„æºé™åˆ¶
- [ ] é…ç½®æ—¥å¿—è½®è½¬
- [ ] å®šæœŸå¤‡ä»½ Redis æ•°æ®
- [ ] å®šæœŸè½®æ¢ API å¯†é’¥

## ğŸ“„ License

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

## ğŸ“® è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: https://github.com/yourusername/ipcheck
- é—®é¢˜åé¦ˆ: https://github.com/yourusername/ipcheck/issues

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’Œ API æœåŠ¡å•†:

- [Fastify](https://www.fastify.io/) - é«˜æ€§èƒ½ Web æ¡†æ¶
- [React](https://reactjs.org/) - UI æ¡†æ¶
- [ip-api.com](https://ip-api.com/) - å…è´¹ IP åœ°ç†ä½ç½® API
- [IPQualityScore](https://www.ipqualityscore.com/) - IP æ¬ºè¯ˆæ£€æµ‹
- [AbuseIPDB](https://www.abuseipdb.com/) - IP æ»¥ç”¨æ•°æ®åº“
- [Cloudflare Radar](https://radar.cloudflare.com/) - ç½‘ç»œæµé‡æ´å¯Ÿ

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©,è¯·ç»™ä¸€ä¸ª Star!**
